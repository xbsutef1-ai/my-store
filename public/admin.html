<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>GLOM Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/admin.css">
</head>
<body>

<div class="top">
  <div class="tbrand">GLOM <span>Dashboard</span></div>
  <div class="tright">
    <input id="adminPass" placeholder="Admin Password">
    <button class="btn" onclick="adminLogin()">Login</button>
    <button class="btn ghost" onclick="location.href='/'">Store</button>
  </div>
</div>

<div class="layout">
  <aside class="side">
    <button onclick="tab('ov')">Overview</button>
    <button onclick="tab('cats')">Categories</button>
    <button onclick="tab('prod')">Products</button>
    <button onclick="tab('cpn')">Coupons</button>
    <button onclick="tab('ord')">Orders</button>
  </aside>

  <main class="main">
    <section id="ov" class="sec">
      <h2>Overview</h2>
      <div class="stats">
        <div class="card"><div class="n" id="stOrders">0</div><div class="s">Orders</div></div>
        <div class="card"><div class="n" id="stPending">0</div><div class="s">Waiting Review</div></div>
        <div class="card"><div class="n" id="stAwaiting">0</div><div class="s">Awaiting Payment</div></div>
        <div class="card"><div class="n" id="stDelivered">0</div><div class="s">Delivered</div></div>
        <div class="card"><div class="n" id="stRevenue">0</div><div class="s">Revenue</div></div>
      </div>
    </section>

    <section id="cats" class="sec hidden">
      <h2>Categories</h2>
      <div class="box">
        <input id="catName" placeholder="اسم القائمة">
        <input id="catSlug" placeholder="slug (اختياري)">
        <input id="catOrder" placeholder="ترتيب (اختياري)">
        <button class="btn" onclick="addCategory()">Add</button>
      </div>
      <div id="catsList"></div>
    </section>

    <section id="prod" class="sec hidden">
      <h2>Products</h2>
      <button class="btn" onclick="openProductModal()">+ Add Product</button>
      <div id="prodList" style="margin-top:14px"></div>
    </section>

    <section id="cpn" class="sec hidden">
      <h2>Coupons</h2>
      <div class="box">
        <input id="cpCode" placeholder="CODE (مثال: GLOM10)">
        <select id="cpType">
          <option value="percent">Percent</option>
          <option value="amount">Amount</option>
        </select>
        <input id="cpValue" placeholder="Value">
        <input id="cpExp" placeholder="Expiry (YYYY-MM-DD) optional">
        <button class="btn" onclick="addCoupon()">Add</button>
      </div>
      <div id="cpList"></div>
    </section>

    <section id="ord" class="sec hidden">
      <h2>Orders</h2>
      <div class="box">
        <select id="ordFilter" onchange="loadOrders()">
          <option value="">All</option>
          <option value="awaiting_payment">awaiting_payment</option>
          <option value="waiting_review">waiting_review</option>
          <option value="delivered">delivered</option>
          <option value="rejected">rejected</option>
        </select>
        <button class="btn" onclick="loadOrders()">Refresh</button>
      </div>
      <div id="ordList"></div>
    </section>
  </main>
</div>

<!-- Product Modal -->
<div id="pm" class="modal hidden">
  <div class="mBox">
    <div class="mHead">
      <b id="pmTitle">Add Product</b>
      <button class="x" onclick="closePM()">✕</button>
    </div>

    <input id="pId" class="inp" placeholder="(hidden id)" style="display:none">
    <input id="pTitle" class="inp" placeholder="Title">
    <textarea id="pDesc" class="inp" placeholder="Description"></textarea>
    <input id="pCat" class="inp" placeholder="Category slug (مثال: tweeks)">
    <input id="pImg" class="inp" placeholder="Images (URLs separated by new line)">
    <label class="chk"><input id="pActive" type="checkbox" checked> Active</label>

    <div class="plans">
      <div class="ph">Plans (فترات) + Keys</div>
      <div class="small">اكتب الفترات بالشكل: اسم|سعر|keys (keys كل سطر)</div>
      <textarea id="pPlans" class="inp" style="height:220px" placeholder="مثال:
Monthly|10
KEY1
KEY2

Lifetime|50
KEYA
KEYB"></textarea>
    </div>

    <button class="btn" onclick="saveProduct()">Save</button>
  </div>
</div>

<script src="/admin.js"></script>
</body>
</html>
